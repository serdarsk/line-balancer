:root {
  --bg: #0f172a;        /* slate-900 */
  --panel: #111827;     /* gray-900 */
  --muted: #1f2937;     /* gray-800 */
  --text: #e5e7eb;      /* gray-200 */
  --accent: #38bdf8;    /* sky-400 */
  --good: #22c55e;      /* green-500 */
  --warn: #f59e0b;      /* amber-500 */
  --bad:  #ef4444;      /* red-500 */
  --card: #0b1220;      /* dark card */
}
* { box-sizing: border-box; }
body { margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial; background: var(--bg); color: var(--text); }
.app { display:grid; grid-template-columns: 340px 1fr; min-height: 100vh; }
aside { background: var(--panel); border-right: 1px solid #111827; padding: 16px; position: sticky; top:0; height: 100vh; overflow: auto; }
main { display:flex; flex-direction: column; gap:16px; padding:16px; }
h1 { font-size: 18px; margin:0 0 12px; letter-spacing:.3px; }
h2 { font-size: 14px; margin: 14px 0 8px; color:#cbd5e1; }
label { display:block; font-size:12px; color:#cbd5e1; margin:8px 0 4px; }
input, select, textarea { width:100%; background:#0b1220; border:1px solid #1f2937; color:var(--text); border-radius:8px; padding:8px 10px; outline:none; }
textarea { min-height: 120px; resize: vertical; }
.row { display:grid; grid-template-columns: 1fr 1fr; gap:10px; }
.btns { display:flex; gap:8px; flex-wrap: wrap; }
button { background: var(--muted); color: var(--text); border: 1px solid #273043; padding:8px 12px; border-radius:10px; cursor:pointer; transition:.15s; font-weight:600; }
button:hover { transform: translateY(-1px); border-color: #334155; }
button.primary { background: var(--accent); color:#0b1220; border-color: transparent; }
button.ghost { background: transparent; border-color:#334155; }
.pill { display:inline-flex; align-items:center; gap:6px; padding:4px 8px; border-radius:999px; background:#0b1220; border:1px solid #23314a; font-size:12px; }

/* Top controls */
.toolbar { display:flex; flex-wrap:wrap; gap:10px; align-items:center; background: var(--panel); border:1px solid #111827; padding:12px; border-radius:14px; }
.kpis { display:grid; grid-template-columns: repeat(4, minmax(160px,1fr)); gap:10px; }
.kpi { background: var(--panel); border:1px solid #111827; padding:12px; border-radius:14px; display:flex; flex-direction:column; gap:6px; }
.kpi h3 { font-size:12px; color:#9ca3af; margin:0; }
.kpi .val { font-size:20px; font-weight:800; letter-spacing:.2px; }

/* Station grid */
.grid { display:grid; gap:10px; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); }
.station { background: var(--card); border:1px solid #1e293b; border-radius:16px; padding:12px; display:flex; flex-direction:column; gap:8px; position:relative; }
.station .title { display:flex; justify-content:space-between; align-items:center; font-weight:700; }
.bar { height:8px; background:#0b1220; border-radius:999px; overflow:hidden; border:1px solid #1f2937; }
.bar > span { display:block; height:100%; width:0%; transition: width .25s linear; }

.tag { font-size:11px; padding:2px 6px; border-radius:6px; border:1px solid #22314a; background:#0b1220; color:#cbd5e1; }
.active-ring { position:absolute; inset:-2px; border-radius:16px; pointer-events:none; box-shadow: 0 0 0 2px var(--accent) inset; opacity:0; transition: .15s; }
.station.active .active-ring { opacity:1; }

.warn { color: var(--warn); }
.bad  { color: var(--bad); }
.good { color: var(--good); }

.footer { opacity:.7; font-size:12px; margin-top:auto; }
.hint { font-size:12px; color:#9ca3af; }
.small { font-size:12px; }

@media (max-width: 900px) {
  .app { grid-template-columns: 1fr; }
  aside { position: relative; height: auto; }
}

/* Layout canvas */
.layout-wrap { background:#e9eef6; border:1px solid #cfd8e3; border-radius:18px; padding:12px; }
svg#lineCanvas { width:100%; height:320px; display:block; }
.station-node { fill:#e5e7eb; stroke:#9aa5b1; stroke-width:1.5; rx:10; ry:10; }
.station-label { font-size:12px; font-weight:700; fill:#1f2937; text-anchor:middle; dominant-baseline:middle; }
.station-load { font-size:10px; fill:#374151; text-anchor:middle; dominant-baseline:middle; }
.active-ring-svg { stroke:#38bdf8; stroke-width:3; fill:none; }
.track { fill:#e5e7eb; stroke:#6b7280; stroke-width:2; }
.sep { stroke:#ef4444; stroke-width:2; }


/* Operations Editor */
.editor table { width:100%; border-collapse: collapse; background:#0b1220; border:1px solid #1f2937; border-radius:8px; overflow:hidden; }
.editor th, .editor td { border-bottom:1px solid #1f2937; padding:6px 8px; font-size:12px; }
.editor th { text-align:left; color:#cbd5e1; background:#0f172a; position:sticky; top:0; }
.editor input { width:100%; background:#0b1220; border:1px solid #22314a; color:#e5e7eb; border-radius:6px; padding:4px 6px; }
.editor .rowBtns { display:flex; gap:6px; }
.editor .mini { padding:4px 8px; border-radius:6px; }
    
.token { fill:#22c55e; stroke:#14532d; stroke-width:1; rx:3; ry:3; }
.packbox { fill:#0b1220; stroke:#334155; }
.packlabel { fill:#e5e7eb; font-size:12px; font-weight:700; text-anchor:middle; dominant-baseline:middle; }

.modal { position: fixed; inset:0; background: rgba(0,0,0,.4); display:flex; align-items:center; justify-content:center; z-index:40; }
.modal.hidden { display:none; }
.modal-content { width: min(720px, 92vw); background:#0b1220; border:1px solid #1f2937; border-radius:12px; padding:12px; }
.modal-header { display:flex; align-items:center; justify-content:space-between; margin-bottom:8px; }
.modal-header h3 { margin:0; font-size:16px; }
#modalBody table { width:100%; border-collapse:collapse; }
#modalBody th, #modalBody td { border-bottom:1px solid #1f2937; padding:6px 8px; font-size:12px; }
#modalBody th { text-align:left; color:#9ca3af; }
