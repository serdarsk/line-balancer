<!DOCTYPE html>
<html lang="en">
<!-- HEADER -->
<header class="brand">
  <div class="brand__inner">
    <a class="brand__logoWrap" href="./" aria-label="Home">
      <div class="logo-bg">
        <img
          src="assets/Img/kiel-logo.png"
          alt="Kiel Americas"
          class="brand__logo"
          decoding="async" />
      </div>
    </a>

    <div class="brand__text">
      <div class="brand__title">Line Balancer</div>
      <div class="brand__subtitle">Kiel Americas • Production Simulation</div>
    </div>
  </div>
  <div class="brand__bar"></div>
</header>

<style>
/* Header genel */
.brand {
  padding: 12px 24px 0;
  background: transparent;
  display: flex;
  flex-direction: column;
}
.brand__inner {
  display: flex;
  align-items: center;
  gap: 16px;
}
.logo-bg {
  background: white;
  padding: 8px 40px;
  border-radius: 6px;
  transform: rotate();
  box-shadow: 0 4px 8px rgba(0,0,0,0.25);
}
.brand__logo {
  height: 160px; /* 3 kat büyütüldü */
  display: block;
}
.brand__text {
  display: flex;
  flex-direction: column;
}
.brand__title {
  font-size: 80px;
  font-weight: bold;
}
.brand__subtitle {
  font-size: 25px;
  color: var(--ink-dim);
}

/* Bordo-Mavi Kiel Şeridi */
.brand__bar {
  margin-top: 8px;
  height: 4px;
  background: linear-gradient(
    90deg,
    #1f5b94 0% 60%,  /* Kiel mavi */
    #c7243a 60% 78%, /* kırmızı kısa şerit */
    #1f5b94 78% 100%
  );
}
</style>

<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Line Balancer — v2.2</title>

  <style>
    :root{
      --bg:#091323;
      --card:#0c172b;
      --border:#162744;
      --ink:#e8eef7;
      --ink-dim:#bcd0ea;
      --soft:#0b1a2a;
      --accent:#1f5b94;

      /* draw hints (main.js okur) */
      --st-gap:10px;
      --st-h:112px;
      --st-w:120px;
      --st-w-compact:98px;
      --st-row-gap:78px;
      --st-label-top:14px;
      --st-time-bottom:18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;background:var(--bg);color:var(--ink);
      font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
    }

    main{max-width:1300px;margin:24px auto;padding:0 16px}
    .grid{display:grid;gap:12px}
    .g2{grid-template-columns:360px 1fr}

    .card{
      background:var(--card);border:1px solid var(--border);
      border-radius:14px;padding:12px;overflow:visible;
    }
    h2{margin:0 0 8px;font-size:18px}
    h3{margin:12px 0 6px;font-size:15px}
    .hint{font-size:12px;color:var(--ink-dim)}
    .badge-soft{
      display:inline-block;background:var(--soft);border:1px solid #18314d;
      border-radius:999px;padding:4px 8px;font-size:12px;color:#cfe2ff
    }
    .pill{background:#0b1527;border:1px solid #0e213b;border-radius:999px;padding:6px 10px}
    .pillbar{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:8px;margin-top:8px}

    .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    label{display:block;font-size:12px;margin:8px 0 4px}
    input,select,textarea{
      width:100%;padding:8px 10px;border-radius:10px;
      border:1px solid #1b2a44;background:#0f1b2d;color:#cfe2ff
    }
    textarea{min-height:110px;font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}

    .btn{padding:8px 12px;border-radius:10px;border:1px solid #1b2a44;background:#11243e;color:#cfe2ff;cursor:pointer}
    .btn.primary{background:#163a63;border-color:var(--accent)}
    .btn.warn{background:#2a1a12;border-color:#7b3e2b}
    .btn:disabled{opacity:.55;cursor:not-allowed}

    /* Simulation canvas */
    #lineCanvas{
      display:block;width:100%;height:auto;
      min-height:520px;
      background:#0b1527;border:1px solid #0e213b;border-radius:12px
    }

    .pack-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(82px,1fr));gap:8px}
    .pack-item{border:1px solid #334;border-radius:8px;height:54px;display:flex;align-items:center;justify-content:center;color:#0b1527;font-weight:700}
    .pack-empty{opacity:.6;text-align:center;padding:16px}

    table{width:100%;border-collapse:collapse}
    th,td{border-bottom:1px dashed #18314d;padding:6px 8px;vertical-align:top}
    td.num{text-align:right}

    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.45);display:flex;align-items:center;justify-content:center;z-index:9999}
    .modal{background:#0c172b;border:1px solid #1b2a44;border-radius:12px;padding:12px;min-width:560px;max-width:900px;max-height:80vh;overflow:auto}
    .modal h3{margin:0 0 8px}

    @media (max-width: 1020px){
      .g2{grid-template-columns:1fr}
      #lineCanvas{min-height:460px}
      .pillbar{grid-template-columns:repeat(2,minmax(0,1fr))}
    }
  </style>
</head>
<body>

<main class="grid g2">

  <!-- LEFT -->
  <section class="card">
    <h2>Line Balancer — Controls</h2>
    <div class="hint" style="margin-bottom:8px">
      <b>Quick guide:</b> Click <i>Apply</i> to balance, then <i>Start</i> to simulate.
      Packaging grows after roughly one <b>Cycle Time</b>. Increase <b>Speed</b> to fast-forward.
    </div>

    <div class="row" style="gap:6px;margin:8px 0">
      <span class="pill">Line: <b id="pillLineVal">7</b></span>
      <span class="pill">People: <b id="pillPeopleVal">6</b></span>
      <span class="pill">Speed× <b id="pillSpeedVal">50</b></span>
      <span class="pill">Cycle Target: <b id="pillTarget">—</b></span>
      <span class="pill">Sim Time: <b id="pillClock">00:00</b></span>
      <span class="pill">Active Work: <b id="pillActive">—</b></span>
    </div>

    <label>Line Type</label>
    <select id="lineType">
      <option value="7" selected>7 Stations</option>
      <option value="20">20 Stations</option>
    </select>

    <div class="row">
      <div style="flex:1">
        <label>People (available)</label>
        <input id="people" type="number" min="1" value="6"/>
      </div>
      <div style="flex:1">
        <label>Max Stations per Person</label>
        <input id="maxStationsPerPerson" type="number" min="1" value="4"/>
      </div>
    </div>

    <div class="row">
      <div style="flex:1">
        <label>Speed (1–500)</label>
        <input id="speed" type="number" min="1" max="500" value="50"/>
      </div>
      <div style="flex:1">
        <label>Cycle Target (sec) — takt</label>
        <input id="targetCycle" type="number" placeholder="e.g. 180"/>
      </div>
    </div>

    <h3>Timing</h3>
    <div class="row">
      <div style="flex:1">
        <label>Shift Start (HH:MM)</label>
        <input id="shiftStart" value="05:00">
      </div>
      <div style="flex:1">
        <label>Shift End (HH:MM)</label>
        <input id="shiftEnd" value="13:30">
      </div>
    </div>
    <label>Breaks (one per line, HH:MM-HH:MM)</label>
    <textarea id="breaks">07:00-07:10
10:00-11:00
12:30-12:40</textarea>

    <h3>Operations JSON</h3>
    <textarea id="opsJson" placeholder='[{"id":1,"name":"OP1","durationSec":30,"preferredStation":1}]'></textarea>

    <div class="row" style="margin:12px 0;gap:8px">
      <button class="btn primary" id="btnApply">Apply</button>
      <button class="btn" id="btnStart">Start</button>
      <button class="btn" id="btnPause">Pause</button>
      <button class="btn warn" id="btnReset">Reset</button>
    </div>

    <h3>Scenario</h3>
    <div class="row" style="gap:8px">
      <button class="btn" id="btnSave">Save Scenario</button>
      <input id="fileLoad" type="file" accept=".json" style="display:none"/>
      <button class="btn" id="btnLoad">Load Scenario</button>
      <button class="btn" id="btnSetBaseline">Set as Baseline (A)</button>
      <button class="btn" id="btnCompare">Compare A vs Current</button>
    </div>

    <h3>Monte Carlo</h3>
    <div class="row">
      <div style="flex:1">
        <label>Variance ±% (per op)</label>
        <input id="mcVar" type="number" value="10" min="0" max="50">
      </div>
      <div style="flex:1">
        <label>Runs</label>
        <input id="mcRuns" type="number" value="100" min="10" max="1000">
      </div>
    </div>
    <div class="row" style="gap:8px;margin-top:6px">
      <button class="btn" id="btnMC">Run Monte Carlo</button>
      <button class="btn" id="btnExportCSV">Export CSV</button>
      <button class="btn" id="btnPrint">Export Report (Print)</button>
    </div>

    <div class="hint" style="margin-top:8px">
      <b>Tip:</b> Save/load scenarios; set Baseline A then compare what-ifs. Monte Carlo probes variability.
    </div>
  </section>

  <!-- RIGHT -->
  <section class="grid" style="gap:12px">

    <!-- People -->
    <div class="card" id="peoplePanel"></div>

    <!-- Simulation -->
    <div class="card">
      <svg id="lineCanvas"></svg>

      <!-- sim progress -->
      <div id="simProg" style="margin:8px 0 0">
        <div class="hint" style="margin-bottom:4px">Run progress</div>
        <div id="simProgWrap" style="height:8px;border:1px solid #1b2a44;border-radius:8px;background:#0b1527;overflow:hidden">
          <div id="simProgBar" style="height:100%;width:0%;background:#2ea8ff"></div>
        </div>
      </div>

      <div class="pillbar">
        <div class="pill">Throughput: <b id="kpiThroughput">0</b></div>
        <div class="pill">Cycle Time (sec): <b id="kpiCycle">—</b></div>
        <div class="pill">Bottleneck Station: <b id="kpiBottleneck">—</b></div>
        <div class="pill">Balance Rate: <b id="kpiBalance">—</b></div>
      </div>
      <div class="hint" id="taktHint" style="margin-top:6px"></div>
      <div class="hint" id="etaHint"></div>
    </div>

    <!-- Packaging -->
    <div class="card">
      <div class="row" style="justify-content:space-between;align-items:center;margin-bottom:6px">
        <div class="badge-soft">Packaging</div>
        <div class="pill">Count: <b id="packCount">0</b></div>
      </div>
      <div id="packGrid" class="pack-grid">
        <div class="pack-empty">No completed units yet</div>
      </div>
    </div>

    <!-- Operations -->
    <div class="card" id="opsPanel"></div>

    <!-- Tips -->
    <div class="card">
      <div class="row" style="justify-content:space-between;align-items:center">
        <div class="badge-soft">Tips & Suggestions</div>
        <button class="btn" id="btnEditOps">Edit Operations</button>
      </div>
      <div id="suggestionsBody" class="hint" style="margin-top:6px">Press “Apply” to see suggestions.</div>
    </div>
  </section>
</main>

<script type="module" src="assets/js/main.js"></script>
</body>
</html>
